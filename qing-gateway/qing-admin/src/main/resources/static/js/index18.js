var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,o=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))n.call(t,r)&&l(e,r,t[r]);return e},i=(e,a)=>t(e,r(a));import{u as c,G as m,r as d,R as u,J as p,I as f,b5 as w,O as b,P as E,b6 as y,b7 as P}from"./index.js";import{P as g}from"./index8.js";function I(){const{loading:e,request:t}=c(y,{onSuccess(e,t){}}),{request:r}=c(P),[a]=m.useForm();d.exports.useEffect((()=>{(async()=>{let e=await t();const r=e.nacosInfo.address.split(":")[0],s=e.nacosInfo.address.split(":")[1],n=e.websocketInfoList.map((e=>e.uri.slice(5)));a.setFieldsValue({IP:r,PORT:s,websocketUriList:n})})()}),[]);const s=async()=>{a.validateFields().then((async e=>{const a={nacosServerAddr:e.IP+":"+e.PORT,websocketUriList:e.websocketUriList.map((e=>"ws://"+e))};await r(a),await t()}))};return u.createElement("div",null,u.createElement(m,{layout:"vertical",labelAlign:"right",form:a},u.createElement(m.Item,{label:"\u66f4\u6539nacos\u5730\u5740",name:"IP",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6709\u6548IP!",pattern:/^(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|[0-9])\.((1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)\.){2}(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)$/}]},u.createElement(p,{addonBefore:"IP:",style:{width:"30%"}})),u.createElement(m.Item,{name:"PORT",rules:[{required:!0,message:"\u8bf7\u8f93\u5165PORT!"}]},u.createElement(f,{addonBefore:"PORT:",min:0,max:65535,style:{width:"30%"}})),u.createElement(m.List,{name:"websocketUriList",rules:[{validator:async(e,t)=>{if(!t||t.length<1)return Promise.reject(new Error("\u81f3\u5c11 1 \u4e2a ws"))}}]},((e,{add:t,remove:r},{errors:a})=>u.createElement(u.Fragment,null,e.map(((t,a)=>u.createElement(m.Item,{label:0===a?"\u66f4\u6539ws\u5730\u5740":"",required:!1,key:t.key},u.createElement(m.Item,i(o({},t),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"\u8f93\u5165ws\u5730\u5740"}],noStyle:!0}),u.createElement(p,{placeholder:"\u5730\u5740",style:{width:"30%"},addonBefore:"ws://"})),e.length>1?u.createElement(w,{style:{marginLeft:"0.5rem",width:"2rem"},onClick:()=>r(t.name)}):null))),u.createElement(m.Item,null,u.createElement(b,{type:"dashed",onClick:()=>t(),icon:u.createElement(E,null)},"\u6dfb\u52a0ws\u5730\u5740\uff0c\u81f3\u5c11\u4e00\u9879"),u.createElement(m.ErrorList,{errors:a})))))),u.createElement(g,{title:"\u4f60\u786e\u5b9a\u8981\u66f4\u6539\u5417",onConfirm:s,okText:"Yes",cancelText:"No"},u.createElement("a",{href:"#"},"\u786e\u8ba4\u66f4\u6539")))}const O=I;export{O as default};

var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&i(e,a,t[a]);return e},c=(e,n)=>t(e,a(n));import{r as m,u as o,R as u,O as d,J as p,G as y,aX as E,H as f,I as b,aY as g,D as x,aZ as q,a_ as k}from"./index.js";import{T as v,S as O}from"./Table.js";import{T as S}from"./index5.js";import{S as j}from"./index7.js";import{P as w}from"./index8.js";import{P as h}from"./PlusCircleOutlined.js";import"./index9.js";import"./Dropdown.js";const I=undefined,T=undefined;var P="_headContainer_d74pj_1",C="_button_d74pj_9";const{Search:V}=p,_=({setVisible:e,refreshData:t})=>{const[a,n]=m.exports.useState("ip"),[r,l]=m.exports.useState("\u79d2"),[i]=y.useForm(),{loading:s,request:c}=o(E),d=[{id:1,type:"ip"},{id:2,type:"interface"}],g=[{id:1,timeunit:"second"},{id:2,timeunit:"minute"}];return u.createElement(f,{title:"\u6dfb\u52a0\u9650\u6d41\u89c4\u5219",visible:!0,okText:"\u786e\u8ba4\u6dfb\u52a0",cancelText:"\u53d6\u6d88",onCancel:()=>e(!1),onOk:async()=>{i.validateFields().then((async a=>{await c(a),await t(),e(!1)}))},confirmLoading:s},u.createElement(y,{layout:"vertical",labelAlign:"right",form:i},u.createElement(y.Item,{label:"\u7c7b\u578b\u9009\u62e9",name:"type",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],initialValue:a},u.createElement(O,{onSelect:e=>{n(e)}},d.map((e=>u.createElement(O.Option,{key:e.id,value:e.type}))))),u.createElement(y.Item,{label:"ip"===a?"\u9650\u5236ip":"\u9650\u5236\u63a5\u53e3",name:"limitKey",rules:[{required:!0,message:"\u8bf7\u8f93\u5165key"}]},u.createElement(p,null)),u.createElement(y.Item,{label:"\u9650\u6d41\u65f6\u95f4\u7ea7",name:"timeunit",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5355\u4f4d"}]},u.createElement(O,{onSelect:e=>{l(e)}},g.map((e=>u.createElement(O.Option,{key:e.id,value:e.timeunit},"second"===e.timeunit?"\u79d2":"\u5206"))))),u.createElement(y.Item,{label:"second"===r?"qps":"qpm",name:"second"===r?"qps":"qpm",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9650\u5236\u91cf\uff01"}]},u.createElement(b,{style:{width:"100%"}}))))},D=({currentRecord:e,setEditVisible:t,refresh:a})=>{const n=[{id:1,type:"ip"},{id:2,type:"interface"}],r=[{id:1,timeunit:"second"},{id:2,timeunit:"minute"}],[l,i]=m.exports.useState(""),{loading:d,request:E}=o(g),[q]=y.useForm();return m.exports.useEffect((()=>{q.setFieldsValue(s({},e))}),[]),u.createElement(f,{title:"\u66f4\u6539\u9650\u6d41\u89c4\u5219",visible:!0,okText:"\u66f4\u6539",cancelText:"\u53d6\u6d88",onCancel:()=>t(!1),confirmLoading:d,onOk:async()=>{await E(c(s({},q.getFieldsValue()),{id:e.id})),x.success("\u66f4\u65b0\u8def\u7531\u89c4\u5219\u6210\u529f"),await a(),t(!1)},mask:!0},u.createElement(y,{layout:"vertical",labelAlign:"right",form:q},u.createElement(y.Item,{label:"\u9009\u62e9\u9650\u6d41\u7c7b\u578b",name:"type",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9650\u6d41\u7c7b\u578b"}]},u.createElement(O,null,n.map((e=>u.createElement(O.Option,{key:e.id,value:e.type}))))),u.createElement(y.Item,{label:"key",name:"limitKey",rules:[{required:!0,message:"\u8bf7\u8f93\u5165key"}]},u.createElement(p,null)),u.createElement(y.Item,{label:"\u9650\u6d41\u65f6\u95f4\u7ea7",name:"timeunit",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9650\u6d41\u65f6\u95f4\u7ea7"}]},u.createElement(O,{onSelect:e=>{i(e)}},r.map((e=>u.createElement(O.Option,{key:e.id,value:e.timeunit},"second"===e.timeunit?"\u79d2":"\u5206"))))),u.createElement(y.Item,{label:"second"===l?"qps":"qpm",name:"second"===l?"qps":"qpm",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9650\u6d41\u65f6\u95f4\u7ea7"}]},u.createElement(b,null))))};function F(){const[e,t]=m.exports.useState(!1),[a,n]=m.exports.useState(!1),[r,l]=m.exports.useState(),i=e=>console.log(e),{data:s,error:c,loading:p,request:y}=o(q,{onSuccess:e=>{}});m.exports.useEffect((()=>{!async function(){await y()}()}),[]);const{request:E}=o(k,{manual:!0,onSuccess:e=>{x.success("\u5220\u9664\u6210\u529f")}}),f=async e=>{await E(e.id),await y()},b=[{title:"\u7c7b\u578b",dataIndex:"type",key:"type",align:"center",render:e=>u.createElement("a",null,e)},{title:"key",key:"limitKey",align:"center",dataIndex:"limitKey",render:e=>u.createElement(S,null,e)},{title:"\u9650\u6d41\u65f6\u95f4\u7ea7",key:"time",dataIndex:"timeunit",align:"center",render:e=>"second"===e?u.createElement(S,{color:"blue"},"\u79d2"):u.createElement(S,{color:"green"},"\u5206")},{title:"\u6700\u5927\u8bf7\u6c42\u6570\u91cf",dataIndex:"qpm",key:"enabled",align:"center",render:(e,t,a)=>null===e?t.qps:e},{title:"\u64cd\u4f5c",key:"action",align:"center",render:(e,t)=>u.createElement(j,{size:"middle"},u.createElement("a",{onClick:()=>{l(t),n(!0)}},"\u7f16\u8f91"),u.createElement(w,{title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:()=>f(e)},u.createElement(d,{type:"link",danger:!0},"\u5220\u9664")))}],g=()=>{t(!0)};return u.createElement("div",null,c?u.createElement("div",null,"request error: ",c.message):u.createElement("div",null,u.createElement("div",{className:P},u.createElement(V,{placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u540d\u6216\u8def\u7531\u65ad\u8a00",onSearch:i,style:{width:200}}),u.createElement(d,{type:"primary",icon:u.createElement(h,null),onClick:g,className:C},"\u65b0\u589e\u89c4\u5219")),e&&u.createElement(_,{setVisible:t,refreshData:y}),u.createElement(v,{columns:b,dataSource:s,loading:p,rowKey:e=>e.id}),a&&r&&u.createElement(D,{currentRecord:r,setEditVisible:n,refresh:y})))}const K=F;export{K as default};
